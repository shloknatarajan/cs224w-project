[workspace]
authors = ["Shlok Natarajan <shlok.natarajan@gmail.com>"]
channels = ["pytorch", "nvidia", "conda-forge"]
name = "cs224w-project"
platforms = ["linux-64", "osx-arm64"]
version = "0.1.0"

[dependencies]
pytorch = ">=2.0,<3"
ogb = ">=1.3.6,<2"
ipykernel = ">=7.1.0,<8"
pubchempy = ">=1.0.5,<2"
numpy = ">=1.24,<2"
pytest = ">=9.0.2,<10"
pip = "*"

# Linux-specific dependencies (CUDA support)
[target.linux-64.dependencies]
pytorch-cuda = "12.1.*"
torchvision = "0.19.*"
torchaudio = "2.4.*"

# macOS-specific dependencies (CPU/MPS support)
[target.osx-arm64.dependencies]
torchvision = ">=0.15,<1"
torchaudio = ">=2.0,<3"

[pypi-dependencies]
torch-geometric = ">=2.7.0, <3"
rdkit-pypi = ">=2022.9.5, <2023"
transformers = ">=4.35.0, <5"  # For ChemBERTa molecular embeddings
PyTDC = ">=1.0.0, <2"          # For drug-target interaction data
safetensors = ">=0.4.0, <1"

[tasks]
train-baselines = "python train_baselines.py"
train-advanced = "python train_advanced.py"
train-seal = "python train_seal.py"
train-gdin = "python train_gdin.py"
train-gdin-external = "python train_gdin_external.py"

# Data fetching tasks for external knowledge
fetch-smiles = "python -m src.data.fetch_smiles"
fetch-pubchem = "python -m src.data.fetch_pubchem_properties"
extract-chemberta = "python -m src.data.extract_chemberta_embeddings"
fetch-drug-targets = "python -m src.data.fetch_drug_targets"

# Fetch all external data at once (runs sequentially)
fetch-data = "python -m src.data.fetch_smiles && python -m src.data.fetch_pubchem_properties && python -m src.data.extract_chemberta_embeddings && python -m src.data.fetch_drug_targets"

train-morgan = "python train_morgan_baselines.py"
train-chemberta = "python train_chemberta_baselines.py"
train-chemberta-fallback = "python train_chemberta_fallback.py"
train-node2vec = "python train_node2vec_baselines.py"

# Reference DDI models with external features
train-ddi-reference = "python train_ddi_reference.py"
train-ddi-external = "python train_ddi_reference_external.py"

# Hyperparameter sweeps
sweep-external-quick = "python sweep_external_hyperparams.py --mode quick --epochs 300"
sweep-external-full = "python sweep_external_hyperparams.py --mode full --epochs 500"
